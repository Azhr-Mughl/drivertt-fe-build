(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{R1fx:function(t,e,n){"use strict";n.r(e),n.d(e,"QuizModule",(function(){return j}));var i=n("ofXK"),s=n("PCNd"),r=n("tyNb"),u=n("SxV6"),c=n("lJxs"),o=n("VovJ"),a=n("fXoL"),b=n("lV75"),l=n("x6JD"),d=n("tk/3");let h=(()=>{class t{constructor(t){this.http=t}get url(){return b.a.baseUrl}startQuiz(t,e){let n=this.url+"questionnaire";return e&&(n+=l.a.getOptionsQuery(e)),this.http.post(n,t).pipe(Object(c.a)(t=>t.data))}sendQuizResult(t,e,n){let i=`${this.url}questionnaire/${t}`;return n&&(i+=l.a.getOptionsQuery(n)),this.http.put(i,e).pipe(Object(c.a)(t=>t.data))}}return t.\u0275fac=function(e){return new(e||t)(a.Ub(d.b))},t.\u0275prov=a.Hb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var g=n("CZ+i"),f=n("/JoM"),p=n("UYTb"),m=n("aF9I"),v=n("+x79");let q=(()=>{class t{constructor(){this.startQuiz=new a.n}selectCategory(t){this.selectedCategory=t}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=a.Fb({type:t,selectors:[["app-before-start"]],inputs:{categories:"categories"},outputs:{startQuiz:"startQuiz"},decls:15,vars:0,consts:[[1,"non-quiz"],[1,"mb-5"],[1,"before-actions"],[1,"primary",3,"click"]],template:function(t,e){1&t&&(a.Qb(0,"div",0),a.Qb(1,"h2"),a.zc(2,"\u0414\u043e\u0431\u0440\u043e \u043f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c \u043d\u0430 \u0442\u0435\u0441\u0442\u043e\u0432\u044b\u0439 \u044d\u043a\u0437\u0430\u043c\u0435\u043d"),a.Pb(),a.Qb(3,"p"),a.zc(4,"\u0423 \u0432\u0430\u0441 \u0431\u0443\u0434\u0435\u0442 "),a.Qb(5,"b"),a.zc(6,"40 \u043c\u0438\u043d\u0443\u0442"),a.Pb(),a.zc(7," \u0447\u0442\u043e\u0431\u044b \u043f\u0440\u043e\u0439\u0442\u0438 \u0442\u0435\u0441\u0442"),a.Pb(),a.Qb(8,"p",1),a.zc(9,"\u0412\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u043e\u0448\u0438\u0431\u0438\u0442\u044c\u0441\u044f \u043c\u0430\u043a\u0441\u0438\u043c\u0443\u043c "),a.Qb(10,"b"),a.zc(11,"4 \u0440\u0430\u0437\u0430"),a.Pb(),a.Pb(),a.Qb(12,"div",2),a.Qb(13,"button",3),a.Xb("click",(function(){return e.startQuiz.emit("8e34bd6e-2305-11ec-a9fa-3cecef02c254")})),a.zc(14,"\u041d\u0410\u0427\u0410\u0422\u042c \u0422\u0415\u0421\u0422"),a.Pb(),a.Pb(),a.Pb())},styles:[".non-quiz[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:400px;text-align:center}.non-quiz[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:red}.before-actions[_ngcontent-%COMP%]{max-width:200px}.before-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}"]}),t})();const Q=function(t,e,n){return{current:t,correct:e,failed:n}};function z(t,e){if(1&t){const t=a.Rb();a.Qb(0,"div",2),a.Xb("click",(function(){a.pc(t);const n=e.index,i=a.bc();return i.currentNumber=n+1,i.changeNumber.emit(n+1)})),a.zc(1),a.Pb()}if(2&t){const t=e.$implicit,n=e.index,i=a.bc();a.hc("ngClass",a.lc(2,Q,i.currentNumber===n+1,!0===t.isRightAnswer,!1===t.isRightAnswer)),a.zb(1),a.Bc(" ",t.number," ")}}let P=(()=>{class t{constructor(){this.changeNumber=new a.n}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=a.Fb({type:t,selectors:[["app-numbers"]],inputs:{questionNumbers:"questionNumbers",currentNumber:"currentNumber"},outputs:{changeNumber:"changeNumber"},decls:2,vars:1,consts:[[1,"numbers"],["class","question-number",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"question-number",3,"ngClass","click"]],template:function(t,e){1&t&&(a.Qb(0,"div",0),a.yc(1,z,2,6,"div",1),a.Pb()),2&t&&(a.zb(1),a.hc("ngForOf",e.questionNumbers))},directives:[i.k,i.j],styles:[".numbers[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(20,1fr);grid-gap:2px}@media screen and (max-width:991px){.numbers[_ngcontent-%COMP%]{grid-template-columns:repeat(10,1fr)}}.numbers[_ngcontent-%COMP%]   .question-number[_ngcontent-%COMP%]{text-align:center;padding:5px;cursor:pointer;background:#262f36;color:#fff}.numbers[_ngcontent-%COMP%]   .current[_ngcontent-%COMP%]{background:#ffc627;color:#000}.numbers[_ngcontent-%COMP%]   .correct[_ngcontent-%COMP%]{color:#fff;background:green}.numbers[_ngcontent-%COMP%]   .failed[_ngcontent-%COMP%]{color:#fff;background:#8b0000}"]}),t})();var w=n("5rUV");function N(t,e){1&t&&a.Mb(0,"app-no-paid-content")}function y(t,e){if(1&t){const t=a.Rb();a.Qb(0,"app-before-start",7),a.Xb("startQuiz",(function(e){return a.pc(t),a.bc(2).startQuiz(e)})),a.Pb()}if(2&t){const t=a.bc(2);a.hc("categories",t.categories)}}function x(t,e){if(1&t){const t=a.Rb();a.Qb(0,"app-numbers",17),a.Xb("changeNumber",(function(e){return a.pc(t),a.bc(3).selectQuestion(e)})),a.Pb()}if(2&t){const t=a.bc(3);a.hc("questionNumbers",t.questionNumbers)("currentNumber",t.currentQuestionNumber)}}function I(t,e){if(1&t){const t=a.Rb();a.Qb(0,"app-question",19),a.Xb("selectedAnswer",(function(e){a.pc(t);const n=a.bc().index;return a.bc(3).selectAnswer(e,n)})),a.Pb()}if(2&t){const t=a.bc(),e=t.index;a.hc("question",t.$implicit)("questionNumber",e+1)}}function O(t,e){if(1&t&&(a.Qb(0,"div"),a.yc(1,I,1,2,"app-question",18),a.Pb()),2&t){const t=e.index,n=a.bc(3);a.zb(1),a.hc("ngIf",t+1===n.currentQuestionNumber)}}function C(t,e){if(1&t){const t=a.Rb();a.Qb(0,"div",20),a.Qb(1,"button",21),a.Xb("click",(function(){return a.pc(t),a.bc(3).finishQuiz()})),a.zc(2,"\u0417\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044c"),a.Pb(),a.Pb()}}function _(t,e){if(1&t){const t=a.Rb();a.Qb(0,"div",8),a.Qb(1,"div",9),a.zc(2),a.Pb(),a.Qb(3,"div"),a.yc(4,x,1,2,"app-numbers",10),a.Pb(),a.yc(5,O,2,1,"div",11),a.Qb(6,"div",12),a.Qb(7,"button",13),a.Xb("click",(function(){return a.pc(t),a.bc(2).changeQuestion(!1)})),a.Mb(8,"i",14),a.zc(9," \u041d\u0430\u0437\u0430\u0434"),a.Pb(),a.Qb(10,"button",13),a.Xb("click",(function(){return a.pc(t),a.bc(2).changeQuestion(!0)})),a.zc(11,"\u0412\u043f\u0435\u0440\u0435\u0434 "),a.Mb(12,"i",15),a.Pb(),a.Pb(),a.yc(13,C,3,0,"div",16),a.Pb()}if(2&t){const t=a.bc(2);a.zb(2),a.Ac(t.timer),a.zb(2),a.hc("ngIf",null==t.questionNumbers?null:t.questionNumbers.length),a.zb(1),a.hc("ngForOf",t.questions),a.zb(8),a.hc("ngIf",t.answeredQuestions.length)}}function M(t,e){if(1&t&&a.Mb(0,"app-question",26),2&t){const t=a.bc(),e=t.index;a.hc("question",t.$implicit)("questionNumber",e+1)("isResults",!0)}}function A(t,e){if(1&t&&(a.Qb(0,"div"),a.yc(1,M,1,3,"app-question",25),a.Pb()),2&t){const t=e.$implicit;a.zb(1),a.hc("ngIf",t.selectedAnswerId)}}function S(t,e){if(1&t){const t=a.Rb();a.Qb(0,"div"),a.Qb(1,"h2",22),a.zc(2),a.Pb(),a.Qb(3,"p",23),a.zc(4),a.Pb(),a.yc(5,A,2,1,"div",11),a.Qb(6,"div",24),a.Qb(7,"button",21),a.Xb("click",(function(){return a.pc(t),a.bc(2).refreshQuiz()})),a.zc(8,"\u041f\u043e\u043f\u0440\u043e\u0431\u043e\u0432\u0430\u0442\u044c \u0435\u0449\u0435 \u0440\u0430\u0437"),a.Pb(),a.Pb(),a.Pb()}if(2&t){const t=a.bc(2);a.zb(2),a.Ac(t.finishText),a.zb(2),a.Cc(" \u0412\u044b \u043e\u0442\u0432\u0435\u0442\u0438\u043b\u0438 \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e \u043d\u0430 ",t.numberOfRightAnswers," \u0432\u043e\u043f\u0440\u043e\u0441\u043e\u0432 \u0438\u0437 ",t.questions.length," "),a.zb(1),a.hc("ngForOf",t.questions)}}function k(t,e){if(1&t&&(a.Qb(0,"div",4),a.yc(1,y,1,1,"app-before-start",5),a.yc(2,_,14,4,"div",6),a.yc(3,S,9,4,"div",2),a.Pb()),2&t){const t=a.bc();a.zb(1),a.hc("ngIf",!t.isStarted),a.zb(1),a.hc("ngIf",t.isStarted&&!t.isFinished),a.zb(1),a.hc("ngIf",t.isFinished)}}const R=[{path:"",component:(()=>{class t{constructor(t,e,n,i,s){this.quizService=t,this.dataValueService=e,this.authService=n,this.router=i,this.storageService=s,this.quizCategory={category_data_value_id:"8e34bd6e-2305-11ec-a9fa-3cecef02c254"},this.currentQuestionNumber=1,this.timer="40:00",this.questionNumbers=[],this.answeredQuestions=[],this.quizSeconds=0}ngOnInit(){this.storageService.get("selectedPriceId")?this.router.navigate([o.a.student,o.a.paying]):this.authService.getLocalIsStudentPaid().pipe(Object(u.a)()).subscribe(t=>{null===t?this.authService.refreshToken().pipe(Object(u.a)()).subscribe(t=>{this.getCategories(),this.authService.setLocalIsStudentPaid(t),this.isStudentPaid=t}):(this.isStudentPaid=t,this.getCategories())})}ngOnDestroy(){clearInterval(this.interval)}startQuiz(t){this.quizCategory.category_data_value_id=t,this.isStarted=!0,this.isFinished=!1,this.questions=[],this.questionNumbers=[],this.answeredQuestions=[],this.currentQuestionNumber=1,this.getQuestions()}finishQuiz(){const t={used_time:this.quizSeconds,questionnaireQuestions:this.answeredQuestions};this.isFinished=!0,clearInterval(this.interval),this.finishText=this.numberOfRightAnswers>35?"\u041f\u043e\u0437\u0434\u0440\u0430\u0432\u043b\u044f\u044e! \u0432\u044b \u0441\u0434\u0430\u043b\u0438 \u0442\u0435\u0441\u0442!":"\u041a \u0441\u043e\u0436\u0430\u043b\u0435\u043d\u0438\u044e, \u0432\u044b \u043d\u0435 \u0441\u0434\u0430\u043b\u0438 \u0442\u0435\u0441\u0442!",this.quizService.sendQuizResult(this.quizId,t,{include:["questionnaireQuestions.question.questionAnswers"]}).pipe(Object(u.a)()).subscribe(t=>{})}selectAnswer(t,e){this.questions[e].selectedAnswerId=t.answerId,this.questionNumbers[e].isRightAnswer=this.questions[e].rightAnswerId===t.answerId,this.numberOfRightAnswers=this.questionNumbers.filter(t=>t.isRightAnswer).length,this.allAnswered=!this.questionNumbers.find(t=>null===t.isRightAnswer),this.answeredQuestions.push({id:t.questionId,question_answer_id:t.answerId}),this.currentQuestionNumber<this.questions.length&&(this.currentQuestionNumber=this.currentQuestionNumber+1)}selectQuestion(t){this.currentQuestionNumber=t}refreshQuiz(){this.isStarted=!1,this.isFinished=!1,this.timer="40:00"}changeQuestion(t){t&&this.currentQuestionNumber<this.questions.length-1?this.currentQuestionNumber++:!t&&this.currentQuestionNumber>0&&this.currentQuestionNumber--}getQuestions(){this.quizService.startQuiz(this.quizCategory,{include:["questionnaireQuestions.question.questionAnswers","questionnaireQuestions.question.image"]}).pipe(Object(u.a)()).subscribe(t=>{t&&(this.quizId=t.id,this.questions=t.questionnaireQuestions.data.map(t=>{var e,n,i,s,r,u,c,o,a,b,l,d;return{questionId:null==t?void 0:t.id,imageUrl:(null===(s=null===(i=null===(n=null===(e=null==t?void 0:t.question)||void 0===e?void 0:e.data)||void 0===n?void 0:n.image)||void 0===i?void 0:i.data)||void 0===s?void 0:s.url)||null,content:(null===(u=null===(r=null==t?void 0:t.question)||void 0===r?void 0:r.data)||void 0===u?void 0:u.content)||null,explanation:(null===(o=null===(c=null==t?void 0:t.question)||void 0===c?void 0:c.data)||void 0===o?void 0:o.explanation)||null,answers:(null===(b=null===(a=null==t?void 0:t.question)||void 0===a?void 0:a.data)||void 0===b?void 0:b.questionAnswers.data)||null,selectedAnswerId:null,rightAnswerId:null===(d=null===(l=null==t?void 0:t.question)||void 0===l?void 0:l.data)||void 0===d?void 0:d.questionAnswers.data.find(t=>t.is_true).id}}),this.questions.length&&(this.quizTimer(),this.getQuestionsNumbers()))})}getCategories(){this.dataValueService.getDataValues({include:["dataValues"]}).pipe(Object(c.a)(t=>t.data[0].dataValues.data),Object(u.a)()).subscribe(t=>{this.categories=t})}getQuestionsNumbers(){var t;for(let e=0;e<this.questions.length;e++)null===(t=this.questionNumbers)||void 0===t||t.push({number:e+1,isRightAnswer:null})}quizTimer(){let t=39,e=60;const n=t=>1===(""+t).length?"0"+t:""+t;this.interval=setInterval(()=>{this.quizSeconds++,e--,-1===e&&(t--,e=59),0===t&&0===e&&(clearInterval(this.interval),this.finishQuiz()),this.timer=`${n(t)}:${n(e)}`},1e3)}}return t.\u0275fac=function(e){return new(e||t)(a.Lb(h),a.Lb(g.a),a.Lb(f.a),a.Lb(r.c),a.Lb(p.a))},t.\u0275cmp=a.Fb({type:t,selectors:[["app-quiz"]],decls:5,vars:2,consts:[[1,"minus-header-footer-height"],[1,"container","py-50"],[4,"ngIf"],["class","body",4,"ngIf"],[1,"body"],[3,"categories","startQuiz",4,"ngIf"],["class","start-quiz",4,"ngIf"],[3,"categories","startQuiz"],[1,"start-quiz"],[1,"timer"],[3,"questionNumbers","currentNumber","changeNumber",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"actions"],[3,"click"],[1,"bx","bx-left-arrow-alt"],[1,"bx","bx-right-arrow-alt"],["class","text-center mt-3",4,"ngIf"],[3,"questionNumbers","currentNumber","changeNumber"],[3,"question","questionNumber","selectedAnswer",4,"ngIf"],[3,"question","questionNumber","selectedAnswer"],[1,"text-center","mt-3"],[1,"primary",3,"click"],[1,"text-center"],[1,"text-center","mb-5"],[1,"text-center","py-5"],[3,"question","questionNumber","isResults",4,"ngIf"],[3,"question","questionNumber","isResults"]],template:function(t,e){1&t&&(a.Qb(0,"div",0),a.Qb(1,"div",1),a.yc(2,N,1,0,"app-no-paid-content",2),a.yc(3,k,4,3,"div",3),a.Pb(),a.Pb(),a.Mb(4,"app-footer")),2&t&&(a.zb(2),a.hc("ngIf",!e.isStudentPaid),a.zb(1),a.hc("ngIf",e.isStudentPaid))},directives:[i.l,m.a,v.a,q,i.k,P,w.a],styles:[".timer[_ngcontent-%COMP%]{text-align:center;font-size:25px;margin-bottom:20px}@media screen and (max-width:768px){app-footer[_ngcontent-%COMP%]{display:none}}.actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:none;display:flex;align-items:center;font-size:16px;border:none;border-bottom:1px solid grey;padding:10px}"]}),t})()}];let F=(()=>{class t{}return t.\u0275mod=a.Jb({type:t}),t.\u0275inj=a.Ib({factory:function(e){return new(e||t)},imports:[[r.g.forChild(R)],r.g]}),t})(),j=(()=>{class t{}return t.\u0275mod=a.Jb({type:t}),t.\u0275inj=a.Ib({factory:function(e){return new(e||t)},imports:[[i.c,F,s.a]]}),t})()}}]);